===========================================================
                                      .___ __  __   
          _________________  __ __  __| _/|__|/  |_ 
         / ___\_` __ \__  \ |  |  \/ __ | | \\_  __\
        / /_/  >  | \// __ \|  |  / /_/ | |  ||  |  
        \___  /|__|  (____  /____/\____ | |__||__|  
       /_____/            \/           \/           
              grep rough audit - static analysis tool
                  v3.5 written by @Wireghoul
=================================[justanotherhacker.com]===
[35m[K/tmp/synapse/tests/rest/media/v1/test_url_preview.py[m[K[36m[K-[m[K[32m[K393[m[K[36m[K-[m[K
[35m[K/tmp/synapse/tests/rest/media/v1/test_url_preview.py[m[K[36m[K:[m[K[32m[K394[m[K[36m[K:[m[K    def test_ip[01;31m[Kaddr([m[Kself) -> None:
[35m[K/tmp/synapse/tests/rest/media/v1/test_url_preview.py[m[K[36m[K-[m[K[32m[K395[m[K[36m[K-[m[K        """
[36m[K##############################################[m[K
[35m[K/tmp/synapse/synapse/config/emailconfig.py[m[K[36m[K-[m[K[32m[K114[m[K[36m[K-[m[K            # make sure it's valid
[35m[K/tmp/synapse/synapse/config/emailconfig.py[m[K[36m[K:[m[K[32m[K115[m[K[36m[K:[m[K            parsed = email.utils.parse[01;31m[Kaddr([m[Kself.email_notif_from)
[35m[K/tmp/synapse/synapse/config/emailconfig.py[m[K[36m[K-[m[K[32m[K116[m[K[36m[K-[m[K            if parsed[1] == "":
[36m[K##############################################[m[K
[35m[K/tmp/synapse/synapse/handlers/account_validity.py[m[K[36m[K-[m[K[32m[K262[m[K[36m[K-[m[K        for address in addresses:
[35m[K/tmp/synapse/synapse/handlers/account_validity.py[m[K[36m[K:[m[K[32m[K263[m[K[36m[K:[m[K            raw_to = email.utils.parse[01;31m[Kaddr([m[Kaddress)[1]
[35m[K/tmp/synapse/synapse/handlers/account_validity.py[m[K[36m[K-[m[K[32m[K264[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/synapse/handlers/send_email.py[m[K[36m[K-[m[K[32m[K159[m[K[36m[K-[m[K
[35m[K/tmp/synapse/synapse/handlers/send_email.py[m[K[36m[K:[m[K[32m[K160[m[K[36m[K:[m[K        raw_from = email.utils.parse[01;31m[Kaddr([m[Kfrom_string)[1]
[35m[K/tmp/synapse/synapse/handlers/send_email.py[m[K[36m[K:[m[K[32m[K161[m[K[36m[K:[m[K        raw_to = email.utils.parse[01;31m[Kaddr([m[Kemail_address)[1]
[35m[K/tmp/synapse/synapse/handlers/send_email.py[m[K[36m[K-[m[K[32m[K162[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/synapse/handlers/room_batch.py[m[K[36m[K-[m[K[32m[K169[m[K[36m[K-[m[K                state chain will derive from. This should probably be the state
[35m[K/tmp/synapse/synapse/handlers/room_batch.py[m[K[36m[K:[m[K[32m[K170[m[K[36m[K:[m[K                from the `prev_event` defined by [01;31m[K`/batch_send?prev_event_id=$abc`[m[K.
[35m[K/tmp/synapse/synapse/handlers/room_batch.py[m[K[36m[K-[m[K[32m[K171[m[K[36m[K-[m[K            app_service_requester: The requester of an application service.
[36m[K##############################################[m[K
[35m[K/tmp/synapse/synapse/handlers/room_batch.py[m[K[36m[K-[m[K[32m[K413[m[K[36m[K-[m[K                probably be the state from the `prev_event` defined by
[35m[K/tmp/synapse/synapse/handlers/room_batch.py[m[K[36m[K:[m[K[32m[K414[m[K[36m[K:[m[K                [01;31m[K`/batch_send?prev_event_id=$abc`[m[K plus the outcome of
[35m[K/tmp/synapse/synapse/handlers/room_batch.py[m[K[36m[K-[m[K[32m[K415[m[K[36m[K-[m[K                `persist_state_events_at_start`
[36m[K##############################################[m[K
[35m[K/tmp/synapse/synapse/module_api/__init__.py[m[K[36m[K-[m[K[32m[K220[m[K[36m[K-[m[K
[35m[K/tmp/synapse/synapse/module_api/__init__.py[m[K[36m[K:[m[K[32m[K221[m[K[36m[K:[m[K        self._raw_from = email.utils.parse[01;31m[Kaddr([m[Kself._from_string)[1]
[35m[K/tmp/synapse/synapse/module_api/__init__.py[m[K[36m[K-[m[K[32m[K222[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/contrib/purge_api/purge_remote_media.sh[m[K[36m[K-[m[K[32m[K29[m[K[36m[K-[m[K###############################################################################
[35m[K/tmp/synapse/contrib/purge_api/purge_remote_media.sh[m[K[36m[K:[m[K[32m[K30[m[K[36m[K:[m[K# sql "UPDATE users SET admin=1 [01;31m[KWHERE name LIKE '$[m[KADMIN'"
[35m[K/tmp/synapse/contrib/purge_api/purge_remote_media.sh[m[K[36m[K-[m[K[32m[K31[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/contrib/purge_api/purge_remote_media.sh[m[K[36m[K-[m[K[32m[K36[m[K[36m[K-[m[K# or internally on the server locally, use this:
[35m[K/tmp/synapse/contrib/purge_api/purge_remote_media.sh[m[K[36m[K:[m[K[32m[K37[m[K[36m[K:[m[KTOKEN=$(sql "SELECT token FROM access_tokens [01;31m[KWHERE user_id='$ADMIN'[m[K ORDER BY id DESC LIMIT 1")
[35m[K/tmp/synapse/contrib/purge_api/purge_remote_media.sh[m[K[36m[K-[m[K[32m[K38[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K49[m[K[36m[K-[m[K# LAST_MESSAGES=1000
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K:[m[K[32m[K50[m[K[36m[K:[m[K# SQL_GET_EVENT="SELECT event_id from events [01;31m[KWHERE type='m.room.message' AND room_id ='$ROOM' ORDER BY received_ts DESC LIMIT 1 offset $(($LAST_MESSAGES[m[K - 1))"
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K51[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K58[m[K[36m[K-[m[K###################################################################################################
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K:[m[K[32m[K59[m[K[36m[K:[m[K# psql -A -t --dbname=synapse -c "UPDATE users SET admin=1 [01;31m[KWHERE name LIKE '$[m[KADMIN'"
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K60[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K75[m[K[36m[K-[m[K# or internally on the server locally, use this:
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K:[m[K[32m[K76[m[K[36m[K:[m[KTOKEN=$(sql "SELECT token FROM access_tokens [01;31m[KWHERE user_id='$ADMIN'[m[K ORDER BY id DESC LIMIT 1")
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K77[m[K[36m[K-[m[KAUTH="Authorization: Bearer $TOKEN"
[36m[K##############################################[m[K
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K97[m[K[36m[K-[m[K    # for postgres:
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K:[m[K[32m[K98[m[K[36m[K:[m[K    sql "SELECT * FROM room_aliases [01;31m[KWHERE room_id='$ROOM'"[m[K
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K99[m[K[36m[K-[m[K    echo "get event..."
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K100[m[K[36m[K-[m[K    # for postgres:
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K:[m[K[32m[K101[m[K[36m[K:[m[K    EVENT_ID=$(sql "SELECT event_id FROM events [01;31m[KWHERE type='m.room.message' AND received_ts<'$UNIX_TIMESTAMP' AND room_id='$ROOM'[m[K ORDER BY received_ts DESC LIMIT 1;")
[35m[K/tmp/synapse/contrib/purge_api/purge_history.sh[m[K[36m[K-[m[K[32m[K102[m[K[36m[K-[m[K    if [ "$EVENT_ID" == "" ]; then
[36m[K##############################################[m[K
[35m[K/tmp/synapse/docs/development/dependencies.md[m[K[36m[K-[m[K[32m[K109[m[K[36m[K-[m[K2. Teach direnv about poetry. The [shell config here](https://github.com/direnv/direnv/wiki/Python#poetry)
[35m[K/tmp/synapse/docs/development/dependencies.md[m[K[36m[K:[m[K[32m[K110[m[K[36m[K:[m[K   needs to be added to `~/.config/direnv/direnvrc` (or more generally [01;31m[K`$XDG_CONFIG_HOME/direnv/direnvrc`[m[K).
[35m[K/tmp/synapse/docs/development/dependencies.md[m[K[36m[K-[m[K[32m[K111[m[K[36m[K-[m[K3. Mark the synapse checkout as a poetry project: `echo layout poetry > .envrc`.
[36m[K##############################################[m[K
[35m[K/tmp/synapse/docs/development/contributing_guide.md[m[K[36m[K-[m[K[32m[K272[m[K[36m[K-[m[K```
[35m[K/tmp/synapse/docs/development/contributing_guide.md[m[K[36m[K:[m[K[32m[K273[m[K[36m[K:[m[K(Note that the paths must be full paths! You could also write [01;31m[K`$(realpath relative/path)`[m[K if needed.)
[35m[K/tmp/synapse/docs/development/contributing_guide.md[m[K[36m[K-[m[K[32m[K274[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/docs/usage/administration/admin_api/README.md[m[K[36m[K-[m[K[32m[K15[m[K[36m[K-[m[Kcommand. This is a script that is distributed as part of synapse. It is possibly
[35m[K/tmp/synapse/docs/usage/administration/admin_api/README.md[m[K[36m[K:[m[K[32m[K16[m[K[36m[K:[m[Kalready on your [01;31m[K`$PATH`[m[K depending on how Synapse was installed.
[35m[K/tmp/synapse/docs/usage/administration/admin_api/README.md[m[K[36m[K-[m[K[32m[K17[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/docs/changelogs/CHANGES-pre-1.0.md[m[K[36m[K-[m[K[32m[K1222[m[K[36m[K-[m[K
[35m[K/tmp/synapse/docs/changelogs/CHANGES-pre-1.0.md[m[K[36m[K:[m[K[32m[K1223[m[K[36m[K:[m[K-   Add explicit dependency on net[01;31m[Kaddr ([m[K[\#3488](https://github.com/matrix-org/synapse/issues/3488))
[35m[K/tmp/synapse/docs/changelogs/CHANGES-pre-1.0.md[m[K[36m[K-[m[K[32m[K1224[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/synapse/docs/changelogs/CHANGES-2021.md[m[K[36m[K-[m[K[32m[K1929[m[K[36m[K-[m[K- Bump mypy-zope to 0.2.13 to fix "Cannot determine consistent method resolution order (MRO)" errors when running mypy a second time. ([\#9678](https://github.com/matrix-org/synapse/issues/9678))
[35m[K/tmp/synapse/docs/changelogs/CHANGES-2021.md[m[K[36m[K:[m[K[32m[K1930[m[K[36m[K:[m[K- Use interpreter from [01;31m[K`$PATH`[m[K via `/usr/bin/env` instead of absolute paths in various scripts. ([\#9689](https://github.com/matrix-org/synapse/issues/9689))
[35m[K/tmp/synapse/docs/changelogs/CHANGES-2021.md[m[K[36m[K-[m[K[32m[K1931[m[K[36m[K-[m[K- Make it possible to use `dmypy`. ([\#9692](https://github.com/matrix-org/synapse/issues/9692))
[36m[K##############################################[m[K
[35m[K/tmp/synapse/CHANGES.md[m[K[36m[K-[m[K[32m[K214[m[K[36m[K-[m[K- Add `@cancellable` decorator, for use on endpoint methods that can be cancelled when clients disconnect. ([\#12586](https://github.com/matrix-org/synapse/issues/12586), [\#12588](https://github.com/matrix-org/synapse/issues/12588), [\#12630](https://github.com/matrix-org/synapse/issues/12630), [\#12694](https://github.com/matrix-org/synapse/issues/12694), [\#12698](https://github.com/matrix-org/synapse/issues/12698), [\#12699](https://github.com/matrix-org/synapse/issues/12699), [\#12700](https://github.com/matrix-org/synapse/issues/12700), [\#12705](https://github.com/matrix-org/synapse/issues/12705))
[35m[K/tmp/synapse/CHANGES.md[m[K[36m[K:[m[K[32m[K215[m[K[36m[K:[m[K- Enable cancellation of [01;31m[K`GET /rooms/$room_id/members`[m[K, [01;31m[K`GET /rooms/$room_id/state`[m[K and [01;31m[K`GET /rooms/$room_id/state/$event_type/*`[m[K requests. ([\#12708](https://github.com/matrix-org/synapse/issues/12708))
[35m[K/tmp/synapse/CHANGES.md[m[K[36m[K-[m[K[32m[K216[m[K[36m[K-[m[K- Improve documentation of the `synapse.push` module. ([\#12676](https://github.com/matrix-org/synapse/issues/12676))
