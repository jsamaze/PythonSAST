===========================================================
                                      .___ __  __   
          _________________  __ __  __| _/|__|/  |_ 
         / ___\_` __ \__  \ |  |  \/ __ | | \\_  __\
        / /_/  >  | \// __ \|  |  / /_/ | |  ||  |  
        \___  /|__|  (____  /____/\____ | |__||__|  
       /_____/            \/           \/           
              grep rough audit - static analysis tool
                  v3.5 written by @Wireghoul
=================================[justanotherhacker.com]===
[35m[K/tmp/copyparty/srv/extend.md[m[K[36m[K-[m[K[32m[K47[m[K[36m[K-[m[K
[35m[K/tmp/copyparty/srv/extend.md[m[K[36m[K:[m[K[32m[K48[m[K[36m[K:[m[Kthe values in the `ex:` columns are linkified to [01;31m[K`example.com/$value`[m[K
[35m[K/tmp/copyparty/srv/extend.md[m[K[36m[K-[m[K[32m[K49[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/contrib/README.md[m[K[36m[K-[m[K[32m[K21[m[K[36m[K-[m[K* `RequestURL`: full URL to the target folder
[35m[K/tmp/copyparty/contrib/README.md[m[K[36m[K:[m[K[32m[K22[m[K[36m[K:[m[K* `URL`: full URL to the root folder (with trailing slash) followed by [01;31m[K`$regex:1|1$`[m[K
[35m[K/tmp/copyparty/contrib/README.md[m[K[36m[K-[m[K[32m[K23[m[K[36m[K-[m[K* `pw`: password (remove `Parameters` if anon-write)
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/contrib/rc/copyparty[m[K[36m[K-[m[K[32m[K23[m[K[36m[K-[m[K                echo "Stopping supervising daemon."
[35m[K/tmp/copyparty/contrib/rc/copyparty[m[K[36m[K:[m[K[32m[K24[m[K[36m[K:[m[K                kill -s TERM [01;31m[K`cat ${pidfile}`[m[K
[35m[K/tmp/copyparty/contrib/rc/copyparty[m[K[36m[K-[m[K[32m[K25[m[K[36m[K-[m[K        fi
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/contrib/nixos/modules/copyparty.nix[m[K[36m[K-[m[K[32m[K81[m[K[36m[K-[m[K        Directly maps to values in the [global] section of the copyparty config.
[35m[K/tmp/copyparty/contrib/nixos/modules/copyparty.nix[m[K[36m[K:[m[K[32m[K82[m[K[36m[K:[m[K        See [01;31m[K`${getExe cfg.package} --help`[m[K for more details.
[35m[K/tmp/copyparty/contrib/nixos/modules/copyparty.nix[m[K[36m[K-[m[K[32m[K83[m[K[36m[K-[m[K      '';
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/contrib/nixos/modules/copyparty.nix[m[K[36m[K-[m[K[32m[K162[m[K[36m[K-[m[K              Attribute list of volume flags to apply.
[35m[K/tmp/copyparty/contrib/nixos/modules/copyparty.nix[m[K[36m[K:[m[K[32m[K163[m[K[36m[K:[m[K              See [01;31m[K`${getExe cfg.package} --help-flags`[m[K for more details.
[35m[K/tmp/copyparty/contrib/nixos/modules/copyparty.nix[m[K[36m[K-[m[K[32m[K164[m[K[36m[K-[m[K            '';
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K646[m[K[36m[K-[m[Kavailable functions:
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K647[m[K[36m[K:[m[K* [01;31m[K`$lpad(text, length, pad_char)`[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K648[m[K[36m[K:[m[K* [01;31m[K`$rpad(text, length, pad_char)`[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K649[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K659[m[K[36m[K-[m[Kor you could use just tags:
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K660[m[K[36m[K:[m[K* `format` = [01;31m[K`$lpad((tn),2,0). (artist) - (title).(ext)`[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K661[m[K[36m[K-[m[K* `output` = `7. meganeko - Sirius A.mp3`
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K914[m[K[36m[K-[m[Kauthenticate with one of the following:
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K915[m[K[36m[K:[m[K* username [01;31m[K`$username`[m[K, password [01;31m[K`$password`[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K916[m[K[36m[K:[m[K* username [01;31m[K`$password`[m[K, password `k`
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K917[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K1414[m[K[36m[K-[m[K* curl/wget: upload some files (post=file, chunk=stdin)
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K1415[m[K[36m[K:[m[K  * [01;31m[K`post(){ curl -F act=bput -F f=@"$1" http://127.0.0.1:3923/?pw=wark;}`[m[K  
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K1416[m[K[36m[K-[m[K    `post movie.mkv`
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K1417[m[K[36m[K:[m[K  * [01;31m[K`post(){ curl -H pw:wark -H rand:8 -T "$1" http://127.0.0.1:3923/;}`[m[K  
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K1418[m[K[36m[K-[m[K    `post movie.mkv`
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K1419[m[K[36m[K:[m[K  * [01;31m[K`post(){ wget --header='pw: wark' --post-file="$1" -O- http://127.0.0.1:3923/?raw;}`[m[K  
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K1420[m[K[36m[K-[m[K    `post movie.mkv`
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K1665[m[K[36m[K-[m[K* **images:** `Pillow` and/or `pyvips` and/or `ffmpeg` (requires py2.7 or py3.5+)
[35m[K/tmp/copyparty/README.md[m[K[36m[K:[m[K[32m[K1666[m[K[36m[K:[m[K* **videos/audio:** `ffmpeg` and `ffprobe` somewhere in [01;31m[K`$PATH`[m[K
[35m[K/tmp/copyparty/README.md[m[K[36m[K-[m[K[32m[K1667[m[K[36m[K-[m[K* **HEIF pictures:** `pyvips` or `ffmpeg` or `pyheif-pillow-opener` (requires Linux or a C compiler)
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/copyparty/stolen/ifaddr/_shared.py[m[K[36m[K-[m[K[32m[K129[m[K[36m[K-[m[K
[35m[K/tmp/copyparty/copyparty/stolen/ifaddr/_shared.py[m[K[36m[K:[m[K[32m[K130[m[K[36m[K:[m[K    class sock[01;31m[Kaddr([m[Kctypes.Structure):
[35m[K/tmp/copyparty/copyparty/stolen/ifaddr/_shared.py[m[K[36m[K-[m[K[32m[K131[m[K[36m[K-[m[K        _fields_ = [
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/copyparty/stolen/ifaddr/_shared.py[m[K[36m[K-[m[K[32m[K157[m[K[36m[K-[m[K
[35m[K/tmp/copyparty/copyparty/stolen/ifaddr/_shared.py[m[K[36m[K:[m[K[32m[K158[m[K[36m[K:[m[K    class sock[01;31m[Kaddr([m[Kctypes.Structure):  # type: ignore
[35m[K/tmp/copyparty/copyparty/stolen/ifaddr/_shared.py[m[K[36m[K-[m[K[32m[K159[m[K[36m[K-[m[K        _fields_ = [("sa_familiy", ctypes.c_uint16), ("sa_data", ctypes.c_uint8 * 14)]
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/docker/Makefile[m[K[36m[K-[m[K[32m[K50[m[K[36m[K-[m[K	-docker rm   `docker ps -qa`
[35m[K/tmp/copyparty/scripts/docker/Makefile[m[K[36m[K:[m[K[32m[K51[m[K[36m[K:[m[K	-docker rmi -f [01;31m[K`docker images -a | awk '/<none>/{print$$3}'`[m[K
[35m[K/tmp/copyparty/scripts/docker/Makefile[m[K[36m[K-[m[K[32m[K52[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/docker/Makefile[m[K[36m[K-[m[K[32m[K55[m[K[36m[K-[m[K	-docker rm   `docker ps -qa`
[35m[K/tmp/copyparty/scripts/docker/Makefile[m[K[36m[K:[m[K[32m[K56[m[K[36m[K:[m[K	-docker rmi  [01;31m[K`docker images -a | awk '!/^alpine/&&NR>1{print$$3}'`[m[K
[35m[K/tmp/copyparty/scripts/docker/Makefile[m[K[36m[K-[m[K[32m[K57[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K217[m[K[36m[K-[m[K+  tag_ln(n) {
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K218[m[K[36m[K:[m[K+    this.ln = [01;31m[K` data-ln="${n}"`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K219[m[K[36m[K-[m[K+    return this;
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K239[m[K[36m[K-[m[K   blockquote(quote) {
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K240[m[K[36m[K:[m[K-    return [01;31m[K`<blockquote>\n${quote}</blockquote>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K241[m[K[36m[K:[m[K+    return [01;31m[K`<blockquote${this.ln}>\n${quote}</blockquote>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K242[m[K[36m[K-[m[K   }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K246[m[K[36m[K-[m[K       const id = this.options.headerPrefix + slugger.slug(raw);
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K247[m[K[36m[K:[m[K-      return [01;31m[K`<h${level} id="${id}">${text}</h${level}>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K248[m[K[36m[K:[m[K+      return [01;31m[K`<h${level}${this.ln} id="${id}">${text}</h${level}>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K249[m[K[36m[K-[m[K     }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K251[m[K[36m[K-[m[K     // ignore IDs
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K252[m[K[36m[K:[m[K-    return [01;31m[K`<h${level}>${text}</h${level}>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K253[m[K[36m[K:[m[K+    return [01;31m[K`<h${level}${this.ln}>${text}</h${level}>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K254[m[K[36m[K-[m[K   }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K258[m[K[36m[K-[m[K   listitem(text) {
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K259[m[K[36m[K:[m[K-    return [01;31m[K`<li>${text}</li>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K260[m[K[36m[K:[m[K+    return [01;31m[K`<li${this.ln}>${text}</li>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K261[m[K[36m[K-[m[K   }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K265[m[K[36m[K-[m[K   paragraph(text) {
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K266[m[K[36m[K:[m[K-    return [01;31m[K`<p>${text}</p>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K267[m[K[36m[K:[m[K+    return [01;31m[K`<p${this.ln}>${text}</p>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K268[m[K[36m[K-[m[K   }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K272[m[K[36m[K-[m[K   tablerow(content) {
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K273[m[K[36m[K:[m[K-    return [01;31m[K`<tr>\n${content}</tr>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K274[m[K[36m[K:[m[K+    return [01;31m[K`<tr${this.ln}>\n${content}</tr>\n`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K275[m[K[36m[K-[m[K   }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K280[m[K[36m[K-[m[K-    return this.options.xhtml ? '<br/>' : '<br>';
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K281[m[K[36m[K:[m[K+    return this.options.xhtml ? [01;31m[K`<br${this.ln}/>`[m[K : [01;31m[K`<br${this.ln}>`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K282[m[K[36m[K-[m[K   }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K286[m[K[36m[K-[m[K 
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K287[m[K[36m[K:[m[K-    let out = [01;31m[K`<img src="${href}" alt="${text}"`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K288[m[K[36m[K:[m[K+    let out = [01;31m[K`<img${this.ln} src="${href}" alt="${text}"`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K289[m[K[36m[K-[m[K     if (title) {
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K:[m[K[32m[K290[m[K[36m[K:[m[K       out += [01;31m[K` title="${title}"`[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked-ln.patch[m[K[36m[K-[m[K[32m[K291[m[K[36m[K-[m[Kdiff --git a/src/Tokenizer.js b/src/Tokenizer.js
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/marked.patch[m[K[36m[K-[m[K[32m[K236[m[K[36m[K-[m[K-            // eslint-disable-next-line no-eval
[35m[K/tmp/copyparty/scripts/deps-docker/marked.patch[m[K[36m[K:[m[K[32m[K237[m[K[36m[K:[m[K-            spec.options.sanitizer = [01;31m[Keval(spec.options.sanitizer)[m[K;
[35m[K/tmp/copyparty/scripts/deps-docker/marked.patch[m[K[36m[K-[m[K[32m[K238[m[K[36m[K-[m[K-          }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/scripts/deps-docker/Makefile[m[K[36m[K-[m[K[32m[K16[m[K[36m[K-[m[K	touch $(vend)/__init__.py
[35m[K/tmp/copyparty/scripts/deps-docker/Makefile[m[K[36m[K:[m[K[32m[K17[m[K[36m[K:[m[K	chown -R [01;31m[K`stat $(self) -c %u:%g`[m[K $(vend)
[35m[K/tmp/copyparty/scripts/deps-docker/Makefile[m[K[36m[K-[m[K[32m[K18[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K-[m[K[32m[K131[m[K[36m[K-[m[Ktime sqlite3 up2k.db 'select mt1.w from mt mt1 inner join mt mt2 on mt1.w = mt2.w where mt1.k = +mt2.k and mt1.rowid != mt2.rowid'  > warks
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K:[m[K[32m[K132[m[K[36m[K:[m[Kcat warks | while IFS= read -r x; do sqlite3 up2k.db "delete from mt [01;31m[Kwhere w = '$x'"[m[K; done
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K-[m[K[32m[K133[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K-[m[K[32m[K137[m[K[36m[K-[m[K# unschedule mtp scan for all files somewhere under "enc/"
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K:[m[K[32m[K138[m[K[36m[K:[m[Ksqlite3 -readonly up2k.db 'select substr(up.w,1,16) from up inner join mt on mt.w = substr(up.w,1,16) [01;31m[Kwhere rd like "enc/%" and +mt.k = "t:mtp"' > keys; awk '{printf "delete from mt where w = \"%s\" and +k = \"t:mtp\";\n", $0}'[m[K <keys | tee /dev/stderr | sqlite3 up2k.db
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K-[m[K[32m[K139[m[K[36m[K-[m[K
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K-[m[K[32m[K140[m[K[36m[K-[m[K# compare metadata key "key" between two databases
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K:[m[K[32m[K141[m[K[36m[K:[m[Ksqlite3 -readonly up2k.db.key-full 'select w, v from mt [01;31m[Kwhere k = "key" order by w' > k1; sqlite3 -readonly up2k.db 'select w, v from mt where k = "key" order by w' > k2; ok=0; ng=0; while IFS='|' read w k2; do k1="$(grep -E "^$w" k1 | sed -r 's/.*\|//')"; [ "$k1" = "$k2" ] && ok=$((ok+1)) || { ng=$((ng+1)); printf '%3s %3s  %s\n' "$k1" "$k2" "$(sqlite3 -readonly up2k.db.key-full "select * from up where substr(w,1,16) = '$w'" | sed -r 's/\|/ | /g')"; }; done < <(cat k2); echo "match $ok   diff $ng"[m[K
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K-[m[K[32m[K142[m[K[36m[K-[m[K
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K-[m[K[32m[K143[m[K[36m[K-[m[K# actually this is much better
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K:[m[K[32m[K144[m[K[36m[K:[m[Ksqlite3 -readonly up2k.db.key-full 'select w, v from mt [01;31m[Kwhere k = "key" order by w' > k1; sqlite3 -readonly up2k.db 'select mt.w, mt.v, up.rd, up.fn from mt inner join up on mt.w = substr(up.w,1,16) where mt.k = "key" order by up.rd, up.fn' > k2; ok=0; ng=0; while IFS='|' read w k2 path; do k1="$(grep -E "^$w" k1 | sed -r 's/.*\|//')"; [ "$k1" = "$k2" ] && ok=$((ok+1)) || { ng=$((ng+1)); printf '%3s %3s  %s\n' "$k1" "$k2" "$path"; }; done < <(cat k2); echo "match $ok   diff $ng"[m[K
[35m[K/tmp/copyparty/docs/notes.sh[m[K[36m[K-[m[K[32m[K145[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K-[m[K[32m[K84[m[K[36m[K-[m[K        // create a search query for each line: name like *youtubeid*
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K:[m[K[32m[K85[m[K[36m[K:[m[K        queries.push([ln, [01;31m[K`name like *${m}*`[m[K]);
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K-[m[K[32m[K86[m[K[36m[K-[m[K    }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K-[m[K[32m[K104[m[K[36m[K-[m[K        }
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K:[m[K[32m[K105[m[K[36m[K:[m[K        var h = [01;31m[K`<tr><td class="${cl}" colspan="9">${esc(fn)}</td></tr>`[m[K;
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K-[m[K[32m[K106[m[K[36m[K-[m[K        tab2.push(h);
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K-[m[K[32m[K108[m[K[36m[K-[m[K        for (var h of r.hits) {
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K:[m[K[32m[K109[m[K[36m[K:[m[K            var link = [01;31m[K`<a href="/${h.rp}">${esc(decodeURIComponent(h.rp))}</a>`[m[K;
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K:[m[K[32m[K110[m[K[36m[K:[m[K            html.push([01;31m[K`<tr><td>${h.sz}</td><td>${link}</td></tr>`[m[K);
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K-[m[K[32m[K111[m[K[36m[K-[m[K        }
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K:[m[K[32m[K112[m[K[36m[K:[m[K        ebi('res').innerHTML = [01;31m[K`searching, ${++a} / ${queries.length} done, ${hits.length} hits, ${misses.length} miss`[m[K;
[35m[K/tmp/copyparty/docs/multisearch.html[m[K[36m[K-[m[K[32m[K113[m[K[36m[K-[m[K    }
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/docs/music-analysis.sh[m[K[36m[K-[m[K[32m[K52[m[K[36m[K-[m[K# afun host, collects/grades the results
[35m[K/tmp/copyparty/docs/music-analysis.sh[m[K[36m[K:[m[K[32m[K53[m[K[36m[K:[m[Krunfun() { cores=8; touch run; rm -f /dev/shm/mres.*; t00=$(date +%s); tbc() { bc | sed -r 's/(\.[0-9]{2}).*/\1/'; }; for ((core=0; core<$cores; core++)); do sqlite3 /mnt/Users/ed/Music/.hist/up2k.db 'select dur.w, dur.v, bpm.v from mt bpm join mt dur on bpm.w = dur.w [01;31m[Kwhere bpm.k = ".bpm" and dur.k = ".dur" order by dur.w' | uniq -w16 | while IFS=\| read w dur bpm; do sqlite3 /mnt/Users/ed/Music/.hist/up2k.db "select rd, fn from up where substr(w,1,16) = '$w'" | sed -r "s/^/$bpm /"; done | grep mir/cr | tr \| / | awk '{v=$1;sub(/[^ ]+ /,"")} '"$br"' {printf "%s %s\n",v,$0}' | while read bpm fn; do [ -e run ] || break; n=$((n+1)); ncore=$((n%cores)); [ $ncore -eq $core ] || continue; t0=$(date +%s.%N); (afun || exit 1; t=$(date +%s.%N); td=$(echo "scale=3; $t - $t0" | tbc); bd=$(echo "scale=3; $bpm / $py" | tbc); printf '%4s sec, %4s orig, %6s py, %4s div, %s\n' $td $bpm $py $bd "$fn") | tee -a /dev/shm/mres.$ncore; rv=${PIPESTATUS[0]}; [ $rv -eq 0 ] || { echo "FAULT($rv): $fn"; }; done & done; wait 2>/dev/null; cat /dev/shm/mres.* | awk 'function prt(c) {printf "\033[3%sm%s\033[0m\n",c,$0} $8!="div,"{next} $5!~/^[0-9\.]+/{next} {meta=$3;det=$5;div=meta/det} div<0.7{det/=2} div>1.3{det*=2} {idet=sprintf("%.0f",det)} {idiff=idet-meta} meta>idet{idiff=meta-idet} idiff==0{n0++;prt(6);next} idiff==1{n1++;prt(3);next} idiff>10{nx++;prt(1);next} {n10++;prt(5)} END {printf "ok: %d   1off: %2s   (%3s)   10off: %2s   (%3s)   fail: %2s\n",n0,n1,n0+n1,n10,n0+n1+n10,nx}'; te=$(date +%s); echo $((te-t00))[m[K sec spent; }
[35m[K/tmp/copyparty/docs/music-analysis.sh[m[K[36m[K-[m[K[32m[K54[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/docs/music-analysis.sh[m[K[36m[K-[m[K[32m[K104[m[K[36m[K-[m[K# runner/wrapper
[35m[K/tmp/copyparty/docs/music-analysis.sh[m[K[36m[K:[m[K[32m[K105[m[K[36m[K:[m[Krunfun() { cores=8; touch run; tbc() { bc | sed -r 's/(\.[0-9]{2}).*/\1/'; }; for ((core=0; core<$cores; core++)); do sqlite3 /mnt/Users/ed/Music/.hist/up2k.db 'select dur.w, dur.v, key.v from mt key join mt dur on key.w = dur.w [01;31m[Kwhere key.k = "key" and dur.k = ".dur" order by dur.w' | uniq -w16 | grep -vE '(Off-Key|None)$' | sed -r "s/ //g;$re" | uniq -w16 | while IFS=\| read w dur bpm; do sqlite3 /mnt/Users/ed/Music/.hist/up2k.db "select rd, fn from up where substr(w,1,16) = '$w'" | sed -r "s/^/$bpm /"; done| grep mir/cr | tr \| / | while read key fn; do [ -e run ] || break; n=$((n+1)); ncore=$((n%cores)); [ $ncore -eq $core ] || continue; t0=$(date +%s.%N); (afun || exit 1; t=$(date +%s.%N); td=$(echo "scale=3; $t - $t0" | tbc); [ "$key" = "$py" ] && c=2 || c=5; printf '%4s sec, %4s orig, \033[3%dm%4s py,\033[0m %s\n' $td "$key" $c "$py" "$fn")[m[K || break; done & done; time wait 2>/dev/null; }
[35m[K/tmp/copyparty/docs/music-analysis.sh[m[K[36m[K-[m[K[32m[K106[m[K[36m[K-[m[K
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/docs/tcp-debug.sh[m[K[36m[K-[m[K[32m[K30[m[K[36m[K-[m[Kgrep 48638 ~/dev/copyparty/strace.strace
[35m[K/tmp/copyparty/docs/tcp-debug.sh[m[K[36m[K:[m[K[32m[K31[m[K[36m[K:[m[K14561 16:35:02.506310 <... accept4 resumed> {sa_family=AF_INET, sin_port=htons(48638), sin_addr=inet_[01;31m[Kaddr([m[K"127.0.0.1")}, [16], SOCK_CLOEXEC) = 8<TCP:[127.0.0.1:3920->127.0.0.1:48638]> <0.000012>
[35m[K/tmp/copyparty/docs/tcp-debug.sh[m[K[36m[K-[m[K[32m[K32[m[K[36m[K-[m[K15230 16:35:02.510725 write(1<pipe:[256639555]>, "1623688502.510380 48638 rh\n", 27 <unfinished ...>
[36m[K##############################################[m[K
[35m[K/tmp/copyparty/bin/mtag/install-deps.sh[m[K[36m[K-[m[K[32m[K252[m[K[36m[K-[m[K		[ -e ~/pe/vamp-sdk ] &&
[35m[K/tmp/copyparty/bin/mtag/install-deps.sh[m[K[36m[K:[m[K[32m[K253[m[K[36m[K:[m[K			sed -ri 's`^(CFLAGS :=.*)[01;31m[K`\1 -I'$HOME'/pe/vamp-sdk/include`[m[K' Makefile.linux
[35m[K/tmp/copyparty/bin/mtag/install-deps.sh[m[K[36m[K-[m[K[32m[K254[m[K[36m[K-[m[K		make -f Makefile.linux -j4 LDFLAGS=-L$HOME/pe/vamp-sdk/lib
